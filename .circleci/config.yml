version: '2.1'


orbs:
  install-orb: bozhos/install-orb@3.2.3


jobs:
  install:
    executor: install-orb/default
    steps:
      - checkout
      - install-orb/install:
          dotnet_version: "3.1"
          app_directory: "deployapp"
      - persist_to_workspace:
          root: .
          paths:
            - .
  deploy:
    executor: install-orb/default
    # Add steps to the job
    # See: https://circleci.com/docs/2.0/configuration-reference/#steps
    steps:
      - attach_workspace:
          at: .
      - install-orb/deploy:
          app_directory: "deployapp"
         
workflows:
  test-my-orb:
    jobs:
      - install
      - deploy:
          context: 
            - aws-context
          requires:
            - install
